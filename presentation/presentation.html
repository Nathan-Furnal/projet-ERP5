<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<title>Présentation du projet - ERPG5</title>
<meta name="author" content="Nathan Furnal"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/white.css" id="theme"/>

<link rel="stylesheet" href="./custom.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>

        <style>
        /* From: https://endlessparentheses.com/public/css/endless.css */
        /* See also: https://meta.superuser.com/questions/4788/css-for-the-new-kbd-style */
        kbd
        {
          -moz-border-radius: 6px;
          -moz-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          -webkit-border-radius: 6px;
          -webkit-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          background-color: #f7f7f7;
          border: 1px solid #ccc;
          border-radius: 6px;
          box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          color: #333;
          display: inline-block;
          font-family: 'Droid Sans Mono', monospace;
          font-size: 80%;
          font-weight: normal;
          line-height: inherit;
          margin: 0 .1em;
          padding: .08em .4em;
          text-shadow: 0 1px 0 #fff;
          word-spacing: -4px;
        
          box-shadow: 2px 2px 2px #222; /* MA: An extra I've added. */
        }
        </style>
        <link rel="stylesheet" type="text/css" href="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/css/tooltipster.bundle.min.css"/>
        
        <link rel="stylesheet" type="text/css" href="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-punk.min.css" />
        
        <script type="text/javascript">
            if (typeof jQuery == 'undefined') {
                document.write(unescape('%3Cscript src="https://code.jquery.com/jquery-1.10.0.min.js"%3E%3C/script%3E'));
            }
        </script>
        
         <script type="text/javascript"            src="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/js/tooltipster.bundle.min.js"></script>
        
          <script>
                 $(document).ready(function() {
                     $('.tooltip').tooltipster({
                         theme: 'tooltipster-punk',
                         contentAsHTML: true,
                         animation: 'grow',
                         delay: [100,500],
                         // trigger: 'click'
                         trigger: 'custom',
                         triggerOpen: {
                             mouseenter: true
                         },
                         triggerClose: {
                             originClick: true,
                             scroll: true
                         }
         });
                 });
             </script>
        
        <style>
           abbr {color: red;}
        
           .tooltip { border-bottom: 1px dotted #000;
                      color:red;
                      text-decoration: none;}
        </style>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Présentation du projet - ERPG5</h1><p class="subtitle"></p>
<h2 class="author">Nathan Furnal</h2>
</section>
<section id="sec-table-of-contents"><div id="table-of-contents" role="doc-toc">
<h2>Table des matières</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#/slide-org251567e">1. Présentation</a>
<ul>
<li><a href="#/slide-org23df5ce">1.1. Présentation du projet</a></li>
</ul>
</li>
<li><a href="#/slide-org40067eb">2. Architecture du projet</a>
<ul>
<li><a href="#/slide-org9bd3a3a">2.1. Odoo</a></li>
<li><a href="#/slide-org511451c">2.2. Django</a></li>
</ul>
</li>
<li><a href="#/slide-org6cc1c59">3. Connexion au service web</a>
<ul>
<li><a href="#/slide-org3cff54e">3.1. Connexion via XML-RPC</a></li>
</ul>
</li>
<li><a href="#/slide-orgf4fa970">4. Conclusion</a>
<ul>
<li><a href="#/slide-org170a371">4.1. Odoo</a></li>
<li><a href="#/slide-orgde7b3cb">4.2. Django</a></li>
</ul>
</li>
<li><a href="#/slide-org39c84f5">5. Questions ?</a></li>
</ul>
</div>
</div>
</section>

<section>
<section id="slide-org251567e">
<h2 id="org251567e"><span class="section-number-2">1.</span> Présentation</h2>
<div class="outline-text-2" id="text-1">
</div>
</section>
<section id="slide-org23df5ce">
<h3 id="org23df5ce"><span class="section-number-3">1.1.</span> Présentation du projet</h3>
<div class="outline-text-3" id="text-1-1">
</div>
</section>
<section id="slide-org0e05185">
<h4 id="org0e05185"><span class="section-number-4">1.1.1.</span> Odoo</h4>
<p>
La partie Odoo est sous <code>odoo-app</code>.
</p>

<ul>
<li>Séparation Modèles et Vues.</li>
<li>La partie Odoo est dans un <i>container</i> sous Odoo 14 et PostgreSQL 13.</li>
<li>Données fictives via les fichiers <code>demo.xml</code> et <code>stock_demo.xml</code>.</li>
<li>Gestion des permissions par le <code>security/ir.model.access.csv</code>.</li>

</ul>

</section>
<section id="slide-org4693330">
<h4 id="org4693330"><span class="section-number-4">1.1.2.</span> Django</h4>
<ul>
<li>La partie Django est sous <code>realtorclient</code>
<ul>
<li>L'application de connexion est sous <code>odoo_connect</code></li>
<li>L'application d'achat d'appartement est sous <code>odoo_realtor</code></li>

</ul></li>
<li>La partie Django est locale et nécessite un environnement virtuel en local.</li>

</ul>

</section>
</section>
<section>
<section id="slide-org40067eb">
<h2 id="org40067eb"><span class="section-number-2">2.</span> Architecture du projet</h2>
<div class="outline-text-2" id="text-2">
</div>
</section>
<section id="slide-org9bd3a3a">
<h3 id="org9bd3a3a"><span class="section-number-3">2.1.</span> Odoo</h3>
<div class="outline-text-3" id="text-2-1">
</div>
</section>
<section id="slide-org978a4a7">
<h4 id="org978a4a7"><span class="section-number-4">2.1.1.</span> <i>Business Object</i> Appartement</h4>
<p>
Appartement mis en vente sur la plate-forme.
</p>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #531ab6; font-weight: bold;">from</span> dateutil.relativedelta <span style="color: #531ab6; font-weight: bold;">import</span> relativedelta

<span style="color: #531ab6; font-weight: bold;">from</span> odoo <span style="color: #531ab6; font-weight: bold;">import</span> api, fields, models
<span style="color: #531ab6; font-weight: bold;">from</span> odoo.exceptions <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">UserError</span>, <span style="color: #005f5f; font-weight: bold;">ValidationError</span>
<span style="color: #531ab6; font-weight: bold;">from</span> odoo.tools <span style="color: #531ab6; font-weight: bold;">import</span> float_compare, float_is_zero

<span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">RealtorApartment</span><span style="color: #000000;">(</span>models.<span style="color: #005f5f; font-weight: bold;">Model</span><span style="color: #000000;">)</span>:
    <span style="color: #005e8b;">_name</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">'realtor.apartment'</span>
    <span style="color: #005e8b;">_description</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">'An apartement unit'</span>

    <span style="color: #005e8b;">_sql_constraints</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">[</span>
        <span style="color: #dd22dd;">(</span><span style="color: #354fcf;">"check_expected_price"</span>, <span style="color: #354fcf;">"CHECK(expected_price &gt; 0)"</span>, <span style="color: #354fcf;">"The expected price must be strictly positive"</span><span style="color: #dd22dd;">)</span>,
        <span style="color: #dd22dd;">(</span><span style="color: #354fcf;">"check_best_price"</span>, <span style="color: #354fcf;">"CHECK(best_price &gt;= 0)"</span>, <span style="color: #354fcf;">"The best offer price must be positive"</span><span style="color: #dd22dd;">)</span>,
        <span style="color: #dd22dd;">(</span><span style="color: #354fcf;">"check_apart_area"</span>, <span style="color: #354fcf;">"CHECK(apartment_area &gt; 0)"</span>, <span style="color: #354fcf;">"The apartment area must be strictly positive"</span><span style="color: #dd22dd;">)</span>,
    <span style="color: #000000;">]</span>

    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">_default_date_availability</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">return</span> fields.<span style="color: #005f5f; font-weight: bold;">Date</span>.context_today<span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span> <span style="font-weight: bold;">+</span> <span style="color: #721045;">relativedelta</span><span style="color: #000000;">(</span>months<span style="font-weight: bold;">=</span><span style="color: #0000b0;">3</span><span style="color: #000000;">)</span>    

    <span style="color: #005e8b;">name</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Char</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Title"</span>, required<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">desc</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Text</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Description"</span><span style="color: #000000;">)</span>

    <span style="color: #005e8b;">img</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Image</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Apartment's picture"</span><span style="color: #000000;">)</span>

    <span style="color: #005e8b;">availability_date</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Date</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Available from"</span>,
                                    default<span style="font-weight: bold;">=</span><span style="color: #531ab6; font-weight: bold;">lambda</span> <span style="color: #531ab6; font-weight: bold;">self</span>: <span style="color: #531ab6; font-weight: bold;">self</span>._default_date_availability<span style="color: #dd22dd;">()</span>, copy<span style="font-weight: bold;">=</span><span style="color: #0000b0;">False</span><span style="color: #000000;">)</span>

    <span style="color: #005e8b;">expected_price</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Float</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Expected Price"</span>, required<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">best_price</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Float</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Best Offer"</span>, compute<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"_compute_best_price"</span>, help<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Best offer received"</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">selling_price</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Float</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Selling Price"</span>, copy<span style="font-weight: bold;">=</span><span style="color: #0000b0;">False</span>, readonly<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span><span style="color: #000000;">)</span>

    <span style="color: #005e8b;">apartment_area</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Integer</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Apartment area"</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">terrace_area</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Integer</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Terrace Area"</span><span style="color: #000000;">)</span>

    <span style="color: #005e8b;">total_area</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Integer</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Total area"</span>, compute<span style="font-weight: bold;">=</span><span style="color: #354fcf;">'_compute_total_area'</span><span style="color: #000000;">)</span>

    <span style="color: #595959; font-style: italic;"># Special   </span>
    <span style="color: #005e8b;">state</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Selection</span><span style="color: #000000;">(</span>
        selection<span style="font-weight: bold;">=</span><span style="color: #dd22dd;">[</span>
            <span style="color: #008899;">(</span><span style="color: #354fcf;">"new"</span>, <span style="color: #354fcf;">"New"</span><span style="color: #008899;">)</span>,
            <span style="color: #008899;">(</span><span style="color: #354fcf;">"offer_received"</span>, <span style="color: #354fcf;">"Offer Received"</span><span style="color: #008899;">)</span>,
            <span style="color: #008899;">(</span><span style="color: #354fcf;">"offer_accepted"</span>, <span style="color: #354fcf;">"Offer Accepted"</span><span style="color: #008899;">)</span>,
            <span style="color: #008899;">(</span><span style="color: #354fcf;">"sold"</span>, <span style="color: #354fcf;">"Sold"</span><span style="color: #008899;">)</span>,
            <span style="color: #008899;">(</span><span style="color: #354fcf;">"canceled"</span>, <span style="color: #354fcf;">"Canceled"</span><span style="color: #008899;">)</span>,
        <span style="color: #dd22dd;">]</span>,
        string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Status"</span>,
        required<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span>,
        copy<span style="font-weight: bold;">=</span><span style="color: #0000b0;">False</span>,
        default<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"new"</span>,
    <span style="color: #000000;">)</span>
    <span style="color: #005e8b;">active</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Boolean</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Active"</span>, default<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span><span style="color: #000000;">)</span>

    <span style="color: #005e8b;">user_id</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Many2one</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"res.users"</span>, string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Salesman"</span>, default<span style="font-weight: bold;">=</span><span style="color: #531ab6; font-weight: bold;">lambda</span> <span style="color: #531ab6; font-weight: bold;">self</span>: <span style="color: #531ab6; font-weight: bold;">self</span>.env.user<span style="color: #000000;">)</span>
    <span style="color: #005e8b;">buyer_id</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Many2one</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"res.partner"</span>, string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Buyer"</span>, readonly<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span>, copy<span style="font-weight: bold;">=</span><span style="color: #0000b0;">False</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">offer_ids</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">One2many</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"realtor.offer"</span>, <span style="color: #354fcf;">"property_id"</span>, string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Offers"</span><span style="color: #000000;">)</span>

    <span style="color: #a0132f; font-weight: bold;">@</span><span style="color: #a0132f;">api.</span><span style="color: #a0132f;">depends</span><span style="color: #000000;">(</span><span style="color: #354fcf;">'apartment_area'</span><span style="color: #a0132f;">, </span><span style="color: #354fcf;">'terrace_area'</span><span style="color: #000000;">)</span>
    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">_compute_total_area</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">for</span> <span style="color: #005e8b;">prop</span> <span style="font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">self</span>:
            prop.<span style="color: #005e8b;">total_area</span> <span style="font-weight: bold;">=</span> prop.apartment_area <span style="font-weight: bold;">+</span> prop.terrace_area

    <span style="color: #a0132f; font-weight: bold;">@</span><span style="color: #a0132f;">api.</span><span style="color: #a0132f;">depends</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"offer_ids.price"</span><span style="color: #000000;">)</span>
    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">_compute_best_price</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">for</span> <span style="color: #005e8b;">prop</span> <span style="font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">self</span>:
            prop.<span style="color: #005e8b;">best_price</span> <span style="font-weight: bold;">=</span> <span style="color: #8f0075; font-weight: bold;">max</span><span style="color: #000000;">(</span>prop.offer_ids.mapped<span style="color: #dd22dd;">(</span><span style="color: #354fcf;">"price"</span><span style="color: #dd22dd;">)</span><span style="color: #000000;">)</span> <span style="color: #531ab6; font-weight: bold;">if</span> prop.offer_ids <span style="color: #531ab6; font-weight: bold;">else</span> <span style="color: #0000b0;">0.0</span>            


    <span style="color: #a0132f; font-weight: bold;">@</span><span style="color: #a0132f;">api.</span><span style="color: #a0132f;">constrains</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"expected_price"</span><span style="color: #a0132f;">, </span><span style="color: #354fcf;">"best_price"</span><span style="color: #000000;">)</span>
    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">_check_price_difference</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">for</span> <span style="color: #005e8b;">prop</span> <span style="font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">self</span>:
            <span style="color: #531ab6; font-weight: bold;">if</span> <span style="color: #000000;">(</span>
                <span style="font-weight: bold;">not</span> <span style="color: #721045;">float_is_zero</span><span style="color: #dd22dd;">(</span>prop.best_price, precision_rounding<span style="font-weight: bold;">=</span><span style="color: #0000b0;">0.01</span><span style="color: #dd22dd;">)</span>
                <span style="font-weight: bold;">and</span> <span style="color: #721045;">float_compare</span><span style="color: #dd22dd;">(</span>prop.best_price,
                                  prop.expected_price <span style="font-weight: bold;">*</span> <span style="color: #0000b0;">90.0</span> <span style="font-weight: bold;">/</span> <span style="color: #0000b0;">100.0</span>, precision_rounding<span style="font-weight: bold;">=</span><span style="color: #0000b0;">0.01</span><span style="color: #dd22dd;">)</span> <span style="font-weight: bold;">&lt;</span> <span style="color: #0000b0;">0</span>
            <span style="color: #000000;">)</span>:
                <span style="color: #531ab6; font-weight: bold;">raise</span> <span style="color: #005f5f; font-weight: bold;">ValidationError</span><span style="color: #000000;">(</span>
                    <span style="color: #354fcf;">"The BEST price must be at least 90% of the expected price! "</span>
                    <span style="font-weight: bold;">+</span> <span style="color: #354fcf;">"You must reduce the expected price if you want to accept this offer."</span>
                <span style="color: #000000;">)</span>

    <span style="color: #a0132f; font-weight: bold;">@</span><span style="color: #a0132f;">api.</span><span style="color: #a0132f;">constrains</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"expected_price"</span><span style="color: #a0132f;">, </span><span style="color: #354fcf;">"selling_price"</span><span style="color: #000000;">)</span>
    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">_check_price_difference</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">for</span> <span style="color: #005e8b;">prop</span> <span style="font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">self</span>:
            <span style="color: #531ab6; font-weight: bold;">if</span> <span style="color: #000000;">(</span>
                <span style="font-weight: bold;">not</span> <span style="color: #721045;">float_is_zero</span><span style="color: #dd22dd;">(</span>prop.selling_price, precision_rounding<span style="font-weight: bold;">=</span><span style="color: #0000b0;">0.01</span><span style="color: #dd22dd;">)</span>
                <span style="font-weight: bold;">and</span> <span style="color: #721045;">float_compare</span><span style="color: #dd22dd;">(</span>prop.selling_price,
                                  prop.expected_price <span style="font-weight: bold;">*</span> <span style="color: #0000b0;">90.0</span> <span style="font-weight: bold;">/</span> <span style="color: #0000b0;">100.0</span>, precision_rounding<span style="font-weight: bold;">=</span><span style="color: #0000b0;">0.01</span><span style="color: #dd22dd;">)</span> <span style="font-weight: bold;">&lt;</span> <span style="color: #0000b0;">0</span>
            <span style="color: #000000;">)</span>:
                <span style="color: #531ab6; font-weight: bold;">raise</span> <span style="color: #005f5f; font-weight: bold;">ValidationError</span><span style="color: #000000;">(</span>
                    <span style="color: #354fcf;">"The SELLING price must be at least 90% of the expected price! "</span>
                    <span style="font-weight: bold;">+</span> <span style="color: #354fcf;">"You must reduce the expected price if you want to accept this offer."</span>
                <span style="color: #000000;">)</span>   

    <span style="color: #595959; font-style: italic;"># ------------------------------------------ CRUD Methods -------------------------------------</span>

    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">unlink</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">if</span> <span style="font-weight: bold;">not</span> <span style="color: #8f0075; font-weight: bold;">set</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span>.mapped<span style="color: #dd22dd;">(</span><span style="color: #354fcf;">"state"</span><span style="color: #dd22dd;">)</span><span style="color: #000000;">)</span> <span style="font-weight: bold;">&lt;=</span> <span style="color: #000000;">{</span><span style="color: #354fcf;">"new"</span>, <span style="color: #354fcf;">"canceled"</span><span style="color: #000000;">}</span>:
            <span style="color: #531ab6; font-weight: bold;">raise</span> <span style="color: #005f5f; font-weight: bold;">UserError</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Only new and canceled properties can be deleted."</span><span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #8f0075; font-weight: bold;">super</span><span style="color: #000000;">()</span>.unlink<span style="color: #000000;">()</span>

    <span style="color: #595959; font-style: italic;"># ---------------------------------------- Action Methods -------------------------------------</span>

    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">action_sold</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">if</span> <span style="color: #354fcf;">"canceled"</span> <span style="font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">self</span>.mapped<span style="color: #000000;">(</span><span style="color: #354fcf;">"state"</span><span style="color: #000000;">)</span>:
            <span style="color: #531ab6; font-weight: bold;">raise</span> <span style="color: #005f5f; font-weight: bold;">UserError</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Canceled properties cannot be sold."</span><span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #531ab6; font-weight: bold;">self</span>.write<span style="color: #000000;">(</span><span style="color: #dd22dd;">{</span><span style="color: #354fcf;">"state"</span>: <span style="color: #354fcf;">"sold"</span><span style="color: #dd22dd;">}</span><span style="color: #000000;">)</span>

    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">action_cancel</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">if</span> <span style="color: #354fcf;">"sold"</span> <span style="font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">self</span>.mapped<span style="color: #000000;">(</span><span style="color: #354fcf;">"state"</span><span style="color: #000000;">)</span>:
            <span style="color: #531ab6; font-weight: bold;">raise</span> <span style="color: #005f5f; font-weight: bold;">UserError</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Sold properties cannot be canceled."</span><span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #531ab6; font-weight: bold;">self</span>.write<span style="color: #000000;">(</span><span style="color: #dd22dd;">{</span><span style="color: #354fcf;">"state"</span>: <span style="color: #354fcf;">"canceled"</span><span style="color: #dd22dd;">}</span><span style="color: #000000;">)</span>             
</code></pre>
</div>
</section>
<section id="slide-org9fd66a5">
<h4 id="org9fd66a5"><span class="section-number-4">2.1.2.</span> <i>Business Object</i> Offre</h4>
<p>
Objet de gestion des offres sur la plate-forme.
</p>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #531ab6; font-weight: bold;">from</span> dateutil.relativedelta <span style="color: #531ab6; font-weight: bold;">import</span> relativedelta

<span style="color: #531ab6; font-weight: bold;">from</span> odoo <span style="color: #531ab6; font-weight: bold;">import</span> api, fields, models
<span style="color: #531ab6; font-weight: bold;">from</span> odoo.exceptions <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">UserError</span>
<span style="color: #531ab6; font-weight: bold;">from</span> odoo.tools <span style="color: #531ab6; font-weight: bold;">import</span> float_compare


<span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">RealtorOffer</span><span style="color: #000000;">(</span>models.<span style="color: #005f5f; font-weight: bold;">Model</span><span style="color: #000000;">)</span>:

    <span style="color: #595959; font-style: italic;"># ---------------------------------------- Private Attributes ---------------------------------</span>

    <span style="color: #005e8b;">_name</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">"realtor.offer"</span>
    <span style="color: #005e8b;">_description</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">"Real Estate Property Offer"</span>
    <span style="color: #005e8b;">_order</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">"price desc"</span>
    <span style="color: #005e8b;">_sql_constraints</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">[</span>
        <span style="color: #dd22dd;">(</span><span style="color: #354fcf;">"check_price"</span>, <span style="color: #354fcf;">"CHECK(price &gt; 0)"</span>, <span style="color: #354fcf;">"The price must be strictly positive"</span><span style="color: #dd22dd;">)</span>,
    <span style="color: #000000;">]</span>

    <span style="color: #595959; font-style: italic;"># --------------------------------------- Fields Declaration ----------------------------------</span>

    <span style="color: #595959; font-style: italic;"># Basic</span>
    <span style="color: #005e8b;">price</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Float</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"Price"</span>, required<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span><span style="color: #000000;">)</span>

    <span style="color: #595959; font-style: italic;"># Relational</span>
    <span style="color: #005e8b;">partner_id</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Many2one</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"res.partner"</span>, string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Partner"</span>, required<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">property_id</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Many2one</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"realtor.apartment"</span>, string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Property"</span>, required<span style="font-weight: bold;">=</span><span style="color: #0000b0;">True</span><span style="color: #000000;">)</span>

    <span style="color: #595959; font-style: italic;"># Special</span>
    <span style="color: #005e8b;">state</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Selection</span><span style="color: #000000;">(</span>
        selection<span style="font-weight: bold;">=</span><span style="color: #dd22dd;">[</span>
            <span style="color: #008899;">(</span><span style="color: #354fcf;">"accepted"</span>, <span style="color: #354fcf;">"Accepted"</span><span style="color: #008899;">)</span>,
            <span style="color: #008899;">(</span><span style="color: #354fcf;">"refused"</span>, <span style="color: #354fcf;">"Refused"</span><span style="color: #008899;">)</span>,
        <span style="color: #dd22dd;">]</span>,
        string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Status"</span>,
        copy<span style="font-weight: bold;">=</span><span style="color: #0000b0;">False</span>,
        default<span style="font-weight: bold;">=</span><span style="color: #0000b0;">False</span>,
    <span style="color: #000000;">)</span>    

    <span style="color: #595959; font-style: italic;"># ------------------------------------------ CRUD Methods -------------------------------------</span>

    <span style="color: #a0132f; font-weight: bold;">@</span><span style="color: #a0132f;">api.</span><span style="color: #a0132f;">model</span>
    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">create</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span>, <span style="color: #005e8b;">vals</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">if</span> vals.get<span style="color: #000000;">(</span><span style="color: #354fcf;">"property_id"</span><span style="color: #000000;">)</span> <span style="font-weight: bold;">and</span> vals.get<span style="color: #000000;">(</span><span style="color: #354fcf;">"price"</span><span style="color: #000000;">)</span>:
            <span style="color: #005e8b;">prop</span> <span style="font-weight: bold;">=</span> <span style="color: #531ab6; font-weight: bold;">self</span>.env<span style="color: #000000;">[</span><span style="color: #354fcf;">"realtor.apartment"</span><span style="color: #000000;">]</span>.browse<span style="color: #000000;">(</span>vals<span style="color: #dd22dd;">[</span><span style="color: #354fcf;">"property_id"</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>
            <span style="color: #595959; font-style: italic;"># We check if the offer is higher than the existing offers</span>
            <span style="color: #531ab6; font-weight: bold;">if</span> prop.offer_ids:
                <span style="color: #005e8b;">max_offer</span> <span style="font-weight: bold;">=</span> <span style="color: #8f0075; font-weight: bold;">max</span><span style="color: #000000;">(</span>prop.mapped<span style="color: #dd22dd;">(</span><span style="color: #354fcf;">"offer_ids.price"</span><span style="color: #dd22dd;">)</span><span style="color: #000000;">)</span>
                <span style="color: #531ab6; font-weight: bold;">if</span> <span style="color: #721045;">float_compare</span><span style="color: #000000;">(</span>vals<span style="color: #dd22dd;">[</span><span style="color: #354fcf;">"price"</span><span style="color: #dd22dd;">]</span>, max_offer, precision_rounding<span style="font-weight: bold;">=</span><span style="color: #0000b0;">0.01</span><span style="color: #000000;">)</span> <span style="font-weight: bold;">&lt;=</span> <span style="color: #0000b0;">0</span>:
                    <span style="color: #531ab6; font-weight: bold;">raise</span> <span style="color: #005f5f; font-weight: bold;">UserError</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"The offer must be higher than %.2f"</span> <span style="font-weight: bold;">%</span> max_offer<span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #8f0075; font-weight: bold;">super</span><span style="color: #000000;">()</span>.create<span style="color: #000000;">(</span>vals<span style="color: #000000;">)</span>

 <span style="color: #595959; font-style: italic;"># ---------------------------------------- Action Methods -------------------------------------</span>

    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">action_accept</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">if</span> <span style="color: #354fcf;">"accepted"</span> <span style="font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">self</span>.mapped<span style="color: #000000;">(</span><span style="color: #354fcf;">"property_id.offer_ids.state"</span><span style="color: #000000;">)</span>:
            <span style="color: #531ab6; font-weight: bold;">raise</span> <span style="color: #005f5f; font-weight: bold;">UserError</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"An offer as already been accepted."</span><span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">self</span>.write<span style="color: #000000;">(</span>
            <span style="color: #dd22dd;">{</span>
                <span style="color: #354fcf;">"state"</span>: <span style="color: #354fcf;">"accepted"</span>,
            <span style="color: #dd22dd;">}</span>
        <span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #531ab6; font-weight: bold;">self</span>.mapped<span style="color: #000000;">(</span><span style="color: #354fcf;">"property_id"</span><span style="color: #000000;">)</span>.write<span style="color: #000000;">(</span>
            <span style="color: #dd22dd;">{</span>
                <span style="color: #354fcf;">"state"</span>: <span style="color: #354fcf;">"offer_accepted"</span>,
                <span style="color: #354fcf;">"selling_price"</span>: <span style="color: #531ab6; font-weight: bold;">self</span>.price,
                <span style="color: #354fcf;">"buyer_id"</span>: <span style="color: #531ab6; font-weight: bold;">self</span>.partner_id.id,
            <span style="color: #dd22dd;">}</span>
        <span style="color: #000000;">)</span>

    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">action_refuse</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #531ab6; font-weight: bold;">self</span>.write<span style="color: #000000;">(</span>
            <span style="color: #dd22dd;">{</span>
                <span style="color: #354fcf;">"state"</span>: <span style="color: #354fcf;">"refused"</span>,
            <span style="color: #dd22dd;">}</span>
        <span style="color: #000000;">)</span>        
</code></pre>
</div>
</section>
<section id="slide-orgf6d8b11">
<h4 id="orgf6d8b11"><span class="section-number-4">2.1.3.</span> <i>Business Object</i> Produit</h4>
<p>
Objet de liaison entre l'appartement et le système de stocks d'Odoo.
</p>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #531ab6; font-weight: bold;">from</span> odoo <span style="color: #531ab6; font-weight: bold;">import</span> models, fields, api

<span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">RealtorProduct</span><span style="color: #000000;">(</span>models.<span style="color: #005f5f; font-weight: bold;">Model</span><span style="color: #000000;">)</span>:
    <span style="color: #005e8b;">_inherit</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">'product.template'</span>

    <span style="color: #005e8b;">apart_id</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Many2one</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"realtor.apartment"</span>, string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Property"</span>, ondelete<span style="font-weight: bold;">=</span><span style="color: #354fcf;">'cascade'</span><span style="color: #000000;">)</span>

    <span style="color: #005e8b;">list_price</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">Float</span><span style="color: #000000;">(</span>compute<span style="font-weight: bold;">=</span><span style="color: #354fcf;">'_update_prod_price'</span><span style="color: #000000;">)</span>

    <span style="color: #a0132f; font-weight: bold;">@</span><span style="color: #a0132f;">api.</span><span style="color: #a0132f;">onchange</span><span style="color: #000000;">(</span><span style="color: #354fcf;">'apart_id'</span><span style="color: #000000;">)</span>
    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">_update_prod_price</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">for</span> <span style="color: #005e8b;">el</span> <span style="font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">self</span>:
            el.<span style="color: #005e8b;">list_price</span> <span style="font-weight: bold;">=</span> el.apart_id.expected_price
</code></pre>
</div>
</section>
<section id="slide-orgc69d103">
<h4 id="orgc69d103"><span class="section-number-4">2.1.4.</span> <i>Business Object</i> Utilisateur</h4>
<p>
Extension de la classe utilisateur pour tenir compte des appartements liés à un utilisateur.
</p>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #595959; font-style: italic;"># -*- coding: utf-8 -*-</span>

<span style="color: #531ab6; font-weight: bold;">from</span> odoo <span style="color: #531ab6; font-weight: bold;">import</span> fields, models


<span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">ResUsers</span><span style="color: #000000;">(</span>models.<span style="color: #005f5f; font-weight: bold;">Model</span><span style="color: #000000;">)</span>:
    <span style="color: #595959; font-style: italic;"># ---------------------------------------- Private Attributes ---------------------------------</span>

    <span style="color: #005e8b;">_inherit</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">"res.users"</span>

    <span style="color: #595959; font-style: italic;"># --------------------------------------- Fields Declaration ----------------------------------</span>
    
    <span style="color: #595959; font-style: italic;"># Relational</span>
    <span style="color: #005e8b;">property_ids</span> <span style="font-weight: bold;">=</span> fields.<span style="color: #005f5f; font-weight: bold;">One2many</span><span style="color: #000000;">(</span>
        <span style="color: #354fcf;">"realtor.apartment"</span>, <span style="color: #354fcf;">"user_id"</span>, string<span style="font-weight: bold;">=</span><span style="color: #354fcf;">"Properties"</span><span style="color: #000000;">)</span>
</code></pre>
</div>
</section>
<section id="slide-org22e78cb">
<h4 id="org22e78cb"><span class="section-number-4">2.1.5.</span> Vues Odoo</h4>
<p>
Les vues sont générées via du XML, on peut créer des sous-pages et des actions qui appelleront les
méthodes du modèle quand on remplit les champs nécessaires.
</p>
<div class="org-src-container">

<pre  class="src src-xml"   ><code trim><span style="color: #595959;">&lt;?</span><span style="color: #531ab6; font-weight: bold;">xml</span> <span style="color: #595959; font-style: italic;">version="1.0" encoding="utf-8"</span><span style="color: #595959;">?&gt;</span>
<span style="color: #595959;">&lt;</span><span style="color: #721045;">odoo</span><span style="color: #595959;">&gt;</span>

    <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apartment_view_form"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"ir.ui.view"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>realtor.apartment.form<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"model"</span><span style="color: #595959;">&gt;</span>realtor.apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"arch"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"xml"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">form</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">header</span><span style="color: #595959;">&gt;</span>
                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">button</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"action_sold"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"object"</span> <span style="color: #005e8b;">string</span>=<span style="color: #354fcf;">"Sold"</span> <span style="color: #005e8b;">states</span>=<span style="color: #354fcf;">"new,offer_received"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">button</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"action_sold"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"object"</span> <span style="color: #005e8b;">string</span>=<span style="color: #354fcf;">"Sold"</span> <span style="color: #005e8b;">states</span>=<span style="color: #354fcf;">"offer_accepted"</span> <span style="color: #005e8b;">class</span>=<span style="color: #354fcf;">"oe_highlight"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">button</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"action_cancel"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"object"</span> <span style="color: #005e8b;">string</span>=<span style="color: #354fcf;">"Cancel"</span> <span style="color: #005e8b;">states</span>=<span style="color: #354fcf;">"new,offer_received,offer_accepted"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"state"</span> <span style="color: #005e8b;">widget</span>=<span style="color: #354fcf;">"statusbar"</span> <span style="color: #005e8b;">statusbar_visible</span>=<span style="color: #354fcf;">"new,offer_received,offer_accepted,sold"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">header</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">sheet</span><span style="color: #595959;">&gt;</span>
                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"availability_date"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"expected_price"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"best_price"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"selling_price"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">notebook</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #721045;">page</span> <span style="color: #005e8b;">string</span>=<span style="color: #354fcf;">"Description"</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                                <span style="color: #595959;">&lt;</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"desc"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>                    
                                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"img"</span> <span style="color: #005e8b;">widget</span>=<span style="color: #354fcf;">"image"</span> <span style="color: #005e8b;">options</span>=<span style="color: #354fcf;">"{'size': [150, 150]}"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apartment_area"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"terrace_area"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>                            
                                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"total_area"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                                <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">page</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #721045;">page</span> <span style="color: #005e8b;">string</span>=<span style="color: #354fcf;">"Offers"</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"offer_ids"</span> <span style="color: #005e8b;">attrs</span>=<span style="color: #354fcf;">"{'readonly': [('state', 'in', ('offer_accepted', 'sold', 'canceled'))]}"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">page</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #721045;">page</span> <span style="color: #005e8b;">string</span>=<span style="color: #354fcf;">"Other Info"</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                                <span style="color: #595959;">&lt;</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"user_id"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                                    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"buyer_id"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                                <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                            <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">group</span><span style="color: #595959;">&gt;</span>
                        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">page</span><span style="color: #595959;">&gt;</span>
                    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">notebook</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">sheet</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">form</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

    <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apartment_view_tree"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"ir.ui.view"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>realtor.apartment.tree<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"model"</span><span style="color: #595959;">&gt;</span>realtor.apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"arch"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"xml"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">tree</span> <span style="color: #005e8b;">string</span>=<span style="color: #354fcf;">"Properties"</span> <span style="color: #005e8b;">decoration-success</span>=<span style="color: #354fcf;">"state in ('offer_received', 'offer_accepted')"</span> <span style="color: #005e8b;">decoration-muted</span>=<span style="color: #354fcf;">"state == 'sold'"</span> <span style="color: #005e8b;">decoration-bf</span>=<span style="color: #354fcf;">"state == 'offer_accepted'"</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apartment_area"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"terrace_area"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>                
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"expected_price"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>    
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"selling_price"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>                                                    
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"availability_date"</span> <span style="color: #005e8b;">optional</span>=<span style="color: #354fcf;">"hide"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"state"</span> <span style="color: #005e8b;">invisible</span>=<span style="color: #354fcf;">"1"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>                
            <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">tree</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

    <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apartment_view_search"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"ir.ui.view"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>realtor.apartment.search<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"model"</span><span style="color: #595959;">&gt;</span>realtor.apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"arch"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"xml"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">search</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"expected_price"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apartment_area"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"terrace_area"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">filter</span> <span style="color: #005e8b;">string</span>=<span style="color: #354fcf;">"Available"</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"available"</span> <span style="color: #005e8b;">domain</span>=<span style="color: #354fcf;">"[('state', 'in', ('new', 'offer_received'))]"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>                                
            <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">search</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

    <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apartment_action"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"ir.actions.act_window"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Apartments<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"res_model"</span><span style="color: #595959;">&gt;</span>realtor.apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"view_mode"</span><span style="color: #595959;">&gt;</span>tree,form<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"context"</span><span style="color: #595959;">&gt;</span>{'search_default_available': 1}<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"help"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"html"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">p</span> <span style="color: #005e8b;">class</span>=<span style="color: #354fcf;">"o_view_nocontent_smiling_face"</span><span style="color: #595959;">&gt;</span>
                Create a property advertisement
            <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">p</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">p</span><span style="color: #595959;">&gt;</span>
                Create real estate properties and follow the selling process.
            <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">p</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

    <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_inherit_product_template"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"ir.ui.view"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Apartment Product<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"model"</span><span style="color: #595959;">&gt;</span>product.template<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"inherit_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"product.product_template_form_view"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"arch"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"xml"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_variant_id"</span> <span style="color: #005e8b;">position</span>=<span style="color: #354fcf;">"after"</span><span style="color: #595959;">&gt;</span><span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">name is mandatory</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
                <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apart_id"</span><span style="color: #595959;">&gt;</span>Apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">odoo</span><span style="color: #595959;">&gt;</span>
</code></pre>
</div>
</section>
<section id="slide-org74375ac">
<h4 id="org74375ac"><span class="section-number-4">2.1.6.</span> Données fictives utilisateur</h4>
<p>
Les données sont elles aussi générées par le XML via les fichiers de démonstration, on peut créer
des nouveaux utilisateurs, des appartements, des lignes de stocks, etc.
</p>
<div class="org-src-container">

<pre  class="src src-xml"   ><code trim><span style="color: #595959;">&lt;</span><span style="color: #721045;">odoo</span><span style="color: #595959;">&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #721045;">data</span><span style="color: #595959;">&gt;</span>

      <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">Initial partners, potential buyers</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
      <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"res.partner"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_partner_01"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Harry Potter<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"res.partner"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_partner_02"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Clark Kent<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"res.partner"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_partner_03"</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Bruce Wayne<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"res.partner"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_partner_04"</span><span style="color: #595959;">&gt;</span>
      <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Franz Kafka<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

  <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">First apartment</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"realtor.apartment"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apart_01"</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Beautiful Apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"desc"</span><span style="color: #595959;">&gt;</span>A beautiful apartment in Brussels<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"img"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"base64"</span> <span style="color: #005e8b;">file</span>=<span style="color: #354fcf;">"realtor/static/img/apart_img01.jpg"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"expected_price"</span><span style="color: #595959;">&gt;</span>350000<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apartment_area"</span><span style="color: #595959;">&gt;</span>100<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"terrace_area"</span><span style="color: #595959;">&gt;</span>20<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"state"</span><span style="color: #595959;">&gt;</span>new<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"user_id"</span> <span style="color: #005e8b;">search</span>=<span style="color: #354fcf;">"[('login','=','eugene.krabs@he2b.be')]"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

  <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">Second apartment</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"realtor.apartment"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apart_02"</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Nice Apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"desc"</span><span style="color: #595959;">&gt;</span>A nice apartment in the city center<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"img"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"base64"</span> <span style="color: #005e8b;">file</span>=<span style="color: #354fcf;">"realtor/static/img/apart_img02.jpg"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"expected_price"</span><span style="color: #595959;">&gt;</span>450000<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apartment_area"</span><span style="color: #595959;">&gt;</span>132<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"terrace_area"</span><span style="color: #595959;">&gt;</span>25<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"state"</span><span style="color: #595959;">&gt;</span>new<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"user_id"</span> <span style="color: #005e8b;">search</span>=<span style="color: #354fcf;">"[('login','=','eugene.krabs@he2b.be')]"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

  <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">Third apartment</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"realtor.apartment"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apart_03"</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Amazing Apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"desc"</span><span style="color: #595959;">&gt;</span>An amazing apartment near a park<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"img"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"base64"</span> <span style="color: #005e8b;">file</span>=<span style="color: #354fcf;">"realtor/static/img/apart_img03.jpg"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"expected_price"</span><span style="color: #595959;">&gt;</span>325000<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apartment_area"</span><span style="color: #595959;">&gt;</span>90<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"terrace_area"</span><span style="color: #595959;">&gt;</span>11<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"state"</span><span style="color: #595959;">&gt;</span>new<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"user_id"</span> <span style="color: #005e8b;">search</span>=<span style="color: #354fcf;">"[('login','=','sandy.cheeks@he2b.be')]"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
  
  <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">Fourth apartment</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"realtor.apartment"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apart_04"</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Rundown Apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"desc"</span><span style="color: #595959;">&gt;</span>A rundown apartment, looks like a shack<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"img"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"base64"</span> <span style="color: #005e8b;">file</span>=<span style="color: #354fcf;">"realtor/static/img/apart_img04.jpg"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"expected_price"</span><span style="color: #595959;">&gt;</span>175000<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apartment_area"</span><span style="color: #595959;">&gt;</span>30<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"terrace_area"</span><span style="color: #595959;">&gt;</span>2<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"state"</span><span style="color: #595959;">&gt;</span>new<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"user_id"</span> <span style="color: #005e8b;">search</span>=<span style="color: #354fcf;">"[('login','=','patrick.star@he2b.be')]"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>  
  
  <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">Fifth apartment</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"realtor.apartment"</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_apart_05"</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Okay Apartment<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"desc"</span><span style="color: #595959;">&gt;</span>An okay apartment, nothing special to see here folks!<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"img"</span> <span style="color: #005e8b;">type</span>=<span style="color: #354fcf;">"base64"</span> <span style="color: #005e8b;">file</span>=<span style="color: #354fcf;">"realtor/static/img/apart_img05.jpg"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"expected_price"</span><span style="color: #595959;">&gt;</span>250000<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apartment_area"</span><span style="color: #595959;">&gt;</span>70<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"terrace_area"</span><span style="color: #595959;">&gt;</span>15<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"state"</span><span style="color: #595959;">&gt;</span>new<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"user_id"</span> <span style="color: #005e8b;">search</span>=<span style="color: #354fcf;">"[('login','=','sheldon.plankton@he2b.be')]"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
  <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>            
  
  <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">data</span><span style="color: #595959;">&gt;</span>
<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">odoo</span><span style="color: #595959;">&gt;</span>
</code></pre>
</div>
</section>
<section id="slide-org8120df4">
<h4 id="org8120df4"><span class="section-number-4">2.1.7.</span> Données fictives de stocks</h4>
<div class="org-src-container">

<pre  class="src src-xml"   ><code trim><span style="color: #595959;">&lt;?</span><span style="color: #531ab6; font-weight: bold;">xml</span> <span style="color: #595959; font-style: italic;">version="1.0" encoding="utf-8"</span><span style="color: #595959;">?&gt;</span>
<span style="color: #595959;">&lt;</span><span style="color: #721045;">odoo</span><span style="color: #595959;">&gt;</span>
    <span style="color: #595959;">&lt;</span><span style="color: #721045;">data</span><span style="color: #595959;">&gt;</span>


        <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">Resource: stock.inventory</span><span style="color: #595959; font-style: italic;"> --&gt;</span>

        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"stock_inventory_0"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>Apartment Inventory<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

        <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">Templating</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_template_1"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"product.template"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>ApartLot1<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apart_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_apart_01"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"type"</span><span style="color: #595959;">&gt;</span>product<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>

        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_template_2"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"product.template"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>ApartLot2<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apart_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_apart_02"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"type"</span><span style="color: #595959;">&gt;</span>product<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_template_3"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"product.template"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>ApartLot3<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apart_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_apart_03"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"type"</span><span style="color: #595959;">&gt;</span>product<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_template_4"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"product.template"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>ApartLot4<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apart_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_apart_04"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"type"</span><span style="color: #595959;">&gt;</span>product<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"realtor_template_5"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"product.template"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"name"</span><span style="color: #595959;">&gt;</span>ApartLot5<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"apart_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_apart_05"</span><span style="color: #595959;">&gt;&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"type"</span><span style="color: #595959;">&gt;</span>product<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959; font-style: italic;">&lt;!-- </span><span style="color: #595959; font-style: italic;">Add apart in inventory</span><span style="color: #595959; font-style: italic;"> --&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"stock_inventory_apart1"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory.line"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_template_1"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"inventory_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"stock_inventory_0"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_qty"</span><span style="color: #595959;">&gt;</span>7.0<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"location_id"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.location"</span> <span style="color: #005e8b;">eval</span>=<span style="color: #354fcf;">"obj().env.ref('stock.warehouse0').lot_stock_id.id"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"stock_inventory_apart2"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory.line"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_template_2"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"inventory_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"stock_inventory_0"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_qty"</span><span style="color: #595959;">&gt;</span>8.0<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"location_id"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.location"</span> <span style="color: #005e8b;">eval</span>=<span style="color: #354fcf;">"obj().env.ref('stock.warehouse0').lot_stock_id.id"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"stock_inventory_apart3"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory.line"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_template_3"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"inventory_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"stock_inventory_0"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_qty"</span><span style="color: #595959;">&gt;</span>11.0<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"location_id"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.location"</span> <span style="color: #005e8b;">eval</span>=<span style="color: #354fcf;">"obj().env.ref('stock.warehouse0').lot_stock_id.id"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"stock_inventory_apart4"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory.line"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_template_4"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"inventory_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"stock_inventory_0"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_qty"</span><span style="color: #595959;">&gt;</span>10.0<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"location_id"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.location"</span> <span style="color: #005e8b;">eval</span>=<span style="color: #354fcf;">"obj().env.ref('stock.warehouse0').lot_stock_id.id"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">record</span> <span style="color: #005e8b;">id</span>=<span style="color: #354fcf;">"stock_inventory_apart5"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory.line"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"realtor_template_5"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"inventory_id"</span> <span style="color: #005e8b;">ref</span>=<span style="color: #354fcf;">"stock_inventory_0"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"product_qty"</span><span style="color: #595959;">&gt;</span>3.0<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">field</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">field</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"location_id"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.location"</span> <span style="color: #005e8b;">eval</span>=<span style="color: #354fcf;">"obj().env.ref('stock.warehouse0').lot_stock_id.id"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">record</span><span style="color: #595959;">&gt;</span>        


        <span style="color: #595959;">&lt;</span><span style="color: #721045;">function</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory"</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"_action_start"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">function</span> <span style="color: #005e8b;">eval</span>=<span style="color: #354fcf;">"[[('state','=','draft'),('id', '=', ref('stock_inventory_0'))]]"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory"</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"search"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">function</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #721045;">function</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory"</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"action_validate"</span><span style="color: #595959;">&gt;</span>
            <span style="color: #595959;">&lt;</span><span style="color: #721045;">function</span> <span style="color: #005e8b;">eval</span>=<span style="color: #354fcf;">"[[('state','=','confirm'),('id', '=', ref('stock_inventory_0'))]]"</span> <span style="color: #005e8b;">model</span>=<span style="color: #354fcf;">"stock.inventory"</span> <span style="color: #005e8b;">name</span>=<span style="color: #354fcf;">"search"</span><span style="color: #595959;">/</span><span style="color: #595959;">&gt;</span>
        <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">function</span><span style="color: #595959;">&gt;</span>

    <span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">data</span><span style="color: #595959;">&gt;</span>
<span style="color: #595959;">&lt;</span><span style="color: #595959;">/</span><span style="color: #721045;">odoo</span><span style="color: #595959;">&gt;</span>
</code></pre>
</div>
</section>
<section id="slide-org511451c">
<h3 id="org511451c"><span class="section-number-3">2.2.</span> Django</h3>
<div class="outline-text-3" id="text-2-2">
</div>
</section>
<section id="slide-orgb793a51">
<h4 id="orgb793a51"><span class="section-number-4">2.2.1.</span> Application de connexion - Modèle</h4>
<p>
Il y a peu à dire sur ce modèle, on crée un objet utilisateur simple et un formulaire pour le
compléter.
</p>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #531ab6; font-weight: bold;">from</span> django.db <span style="color: #531ab6; font-weight: bold;">import</span> models

<span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">User</span><span style="color: #000000;">(</span>models.<span style="color: #005f5f; font-weight: bold;">Model</span><span style="color: #000000;">)</span>:
    <span style="color: #005e8b;">login</span> <span style="font-weight: bold;">=</span> models.<span style="color: #005f5f; font-weight: bold;">CharField</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"login"</span>, max_length<span style="font-weight: bold;">=</span><span style="color: #0000b0;">200</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">password</span> <span style="font-weight: bold;">=</span> models.<span style="color: #005f5f; font-weight: bold;">CharField</span><span style="color: #000000;">(</span><span style="color: #354fcf;">"password"</span>, max_length<span style="font-weight: bold;">=</span><span style="color: #0000b0;">200</span><span style="color: #000000;">)</span>

    <span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">Meta</span>:
        <span style="color: #005e8b;">constraints</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">[</span>
            models.<span style="color: #005f5f; font-weight: bold;">UniqueConstraint</span><span style="color: #dd22dd;">(</span><span style="color: #354fcf;">'login'</span>, name<span style="font-weight: bold;">=</span><span style="color: #354fcf;">'unique_login'</span><span style="color: #dd22dd;">)</span>
        <span style="color: #000000;">]</span>
</code></pre>
</div>
<p>
et
</p>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #531ab6; font-weight: bold;">from</span> django <span style="color: #531ab6; font-weight: bold;">import</span> forms
<span style="color: #531ab6; font-weight: bold;">from</span> .models <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">User</span>

<span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">UserForm</span><span style="color: #000000;">(</span>forms.<span style="color: #005f5f; font-weight: bold;">ModelForm</span><span style="color: #000000;">)</span>:
    <span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">Meta</span>:
        <span style="color: #005e8b;">model</span> <span style="font-weight: bold;">=</span> <span style="color: #005f5f; font-weight: bold;">User</span>
        <span style="color: #005e8b;">fields</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">[</span>
            <span style="color: #354fcf;">'login'</span>,
            <span style="color: #354fcf;">'password'</span>
        <span style="color: #000000;">]</span>
</code></pre>
</div>
</section>
<section id="slide-org2aa0e49">
<h4 id="org2aa0e49"><span class="section-number-4">2.2.2.</span> Application de connexion - Vue</h4>
<p>
La vue capture le niveau d'erreur lors de la tentative de connexion au service web. Elle va aussi
permettre l'enregistrement de l'utilisateur et du mot de passe dans un fichier d'environnement.
</p>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #531ab6; font-weight: bold;">from</span> django.contrib <span style="color: #531ab6; font-weight: bold;">import</span> messages
<span style="color: #531ab6; font-weight: bold;">from</span> django.http <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">HttpResponseRedirect</span>
<span style="color: #531ab6; font-weight: bold;">from</span> django.urls <span style="color: #531ab6; font-weight: bold;">import</span> reverse
<span style="color: #531ab6; font-weight: bold;">from</span> django.views.generic <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">ListView</span>
<span style="color: #531ab6; font-weight: bold;">from</span> django.conf <span style="color: #531ab6; font-weight: bold;">import</span> settings

<span style="color: #531ab6; font-weight: bold;">from</span> .forms <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">UserForm</span>
<span style="color: #531ab6; font-weight: bold;">from</span> .models <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">User</span>

<span style="color: #531ab6; font-weight: bold;">import</span> xml_rpc <span style="color: #531ab6; font-weight: bold;">as</span> xml_rpc

<span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">IndexView</span><span style="color: #000000;">(</span><span style="color: #005f5f; font-weight: bold;">ListView</span><span style="color: #000000;">)</span>:
    <span style="color: #005e8b;">model</span> <span style="font-weight: bold;">=</span> <span style="color: #005f5f; font-weight: bold;">User</span>
    <span style="color: #005e8b;">template_name</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">"odoo_connect/index.html"</span>
    <span style="color: #005e8b;">context_object_name</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">"connection"</span>

    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">get_context_data</span><span style="color: #000000;">(</span><span style="color: #531ab6; font-weight: bold;">self</span>, <span style="font-weight: bold;">*</span>, <span style="color: #005e8b;">object_list</span><span style="font-weight: bold;">=</span><span style="color: #0000b0;">None</span>, <span style="font-weight: bold;">**</span><span style="color: #005e8b;">kwargs</span><span style="color: #000000;">)</span>:
        <span style="color: #005e8b;">context</span> <span style="font-weight: bold;">=</span> <span style="color: #8f0075; font-weight: bold;">super</span><span style="color: #000000;">()</span>.get_context_data<span style="color: #000000;">(</span><span style="font-weight: bold;">**</span>kwargs<span style="color: #000000;">)</span>
        context<span style="color: #000000;">[</span><span style="color: #005e8b;">'userForm'</span><span style="color: #000000;">]</span> <span style="font-weight: bold;">=</span> <span style="color: #005f5f; font-weight: bold;">UserForm</span>
        <span style="color: #531ab6; font-weight: bold;">return</span> context

<span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">_write_info</span><span style="color: #000000;">(</span><span style="color: #005e8b;">login</span>, <span style="color: #005e8b;">username</span><span style="color: #000000;">)</span>:
    <span style="color: #531ab6; font-weight: bold;">with</span> <span style="color: #8f0075; font-weight: bold;">open</span><span style="color: #000000;">(</span>settings.<span style="color: #0000b0; font-weight: bold;">BASE_DIR</span> <span style="font-weight: bold;">/</span> <span style="color: #354fcf;">'.env'</span>, <span style="color: #354fcf;">'w'</span><span style="color: #000000;">)</span> <span style="color: #531ab6; font-weight: bold;">as</span> f:
        f.write<span style="color: #000000;">(</span><span style="color: #354fcf;">f"</span><span style="color: #00663f; font-weight: bold;">{</span><span style="color: #000000; background-color: #ffffff;">login</span><span style="color: #00663f; font-weight: bold;">}</span><span style="color: #354fcf;">,</span><span style="color: #00663f; font-weight: bold;">{</span><span style="color: #000000; background-color: #ffffff;">username</span><span style="color: #00663f; font-weight: bold;">}</span><span style="color: #354fcf;">"</span><span style="color: #000000;">)</span>

<span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">connect</span><span style="color: #000000;">(</span><span style="color: #005e8b;">request</span><span style="color: #000000;">)</span>:
    <span style="color: #005e8b;">form</span> <span style="font-weight: bold;">=</span> <span style="color: #005f5f; font-weight: bold;">UserForm</span><span style="color: #000000;">(</span>request.<span style="color: #0000b0; font-weight: bold;">POST</span><span style="color: #000000;">)</span>
    <span style="color: #595959; font-style: italic;"># A Model Form won't be valid if a field is already in the DB (very annoying)</span>
    <span style="color: #595959; font-style: italic;"># We need to try with the else clause to see if the connection to Odoo works</span>
    <span style="color: #595959; font-style: italic;"># Lots of copying code here</span>
    <span style="color: #531ab6; font-weight: bold;">if</span> form.is_valid<span style="color: #000000;">()</span>:
        <span style="color: #005e8b;">login</span>, <span style="color: #005e8b;">password</span> <span style="font-weight: bold;">=</span> form.cleaned_data<span style="color: #000000;">[</span><span style="color: #354fcf;">'login'</span><span style="color: #000000;">]</span>, form.cleaned_data<span style="color: #000000;">[</span><span style="color: #354fcf;">'password'</span><span style="color: #000000;">]</span>
        <span style="color: #531ab6; font-weight: bold;">try</span>:
            <span style="color: #005e8b;">uid</span> <span style="font-weight: bold;">=</span> xml_rpc.connect<span style="color: #000000;">(</span>login, password<span style="color: #000000;">)</span>
            <span style="color: #531ab6; font-weight: bold;">if</span> uid:
                <span style="color: #005f5f; font-weight: bold;">User</span>.objects.create<span style="color: #000000;">(</span>
                    login<span style="font-weight: bold;">=</span>login,
                    password<span style="font-weight: bold;">=</span>password,
                <span style="color: #000000;">)</span>
                <span style="color: #721045;">_write_info</span><span style="color: #000000;">(</span>login, password<span style="color: #000000;">)</span>
                messages.success<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"Identification succeeded!"</span><span style="color: #000000;">)</span>
            <span style="color: #531ab6; font-weight: bold;">else</span>:
                messages.error<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"Identification failed."</span><span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">except</span> <span style="color: #005f5f; font-weight: bold;">ConnectionError</span>:
            messages.error<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"The 0doo server is not started!"</span><span style="color: #000000;">)</span>
    <span style="color: #531ab6; font-weight: bold;">else</span>:
        <span style="color: #005e8b;">login</span>, <span style="color: #005e8b;">password</span> <span style="font-weight: bold;">=</span> form.data<span style="color: #000000;">[</span><span style="color: #354fcf;">'login'</span><span style="color: #000000;">]</span>, form.data<span style="color: #000000;">[</span><span style="color: #354fcf;">'password'</span><span style="color: #000000;">]</span>  <span style="color: #595959; font-style: italic;"># data and not cleaned_data</span>
        <span style="color: #531ab6; font-weight: bold;">try</span>:
            <span style="color: #005e8b;">uid</span> <span style="font-weight: bold;">=</span> xml_rpc.connect<span style="color: #000000;">(</span>login, password<span style="color: #000000;">)</span>
            <span style="color: #531ab6; font-weight: bold;">if</span> uid:
                <span style="color: #005e8b;">user</span> <span style="font-weight: bold;">=</span> <span style="color: #005f5f; font-weight: bold;">User</span>.objects.get<span style="color: #000000;">(</span>
                    login<span style="font-weight: bold;">=</span>login,
                    password<span style="font-weight: bold;">=</span>password,
                <span style="color: #000000;">)</span>
                <span style="color: #531ab6; font-weight: bold;">if</span> user:
                    messages.success<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"Identification succeeded!"</span><span style="color: #000000;">)</span>
                    <span style="color: #721045;">_write_info</span><span style="color: #000000;">(</span>login, password<span style="color: #000000;">)</span>
            <span style="color: #531ab6; font-weight: bold;">else</span>:
                messages.error<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"Identification failed."</span><span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">except</span> <span style="color: #005f5f; font-weight: bold;">ConnectionError</span>:
            messages.error<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"The 0doo server is not started!"</span><span style="color: #000000;">)</span>
    <span style="color: #595959; font-style: italic;"># redirection vers le site apr&#232;s la requ&#234;te POST</span>
    <span style="color: #595959; font-style: italic;"># redirection apr&#232;s la gestion correcte pour emp&#234;cher de poster deux fois</span>
    <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #005f5f; font-weight: bold;">HttpResponseRedirect</span><span style="color: #000000;">(</span><span style="color: #721045;">reverse</span><span style="color: #dd22dd;">(</span><span style="color: #354fcf;">'odoo_connect:index'</span><span style="color: #dd22dd;">)</span><span style="color: #000000;">)</span>
</code></pre>
</div>
</section>
<section id="slide-orgd614dac">
<h4 id="orgd614dac"><span class="section-number-4">2.2.3.</span> Application d'achat d'appartement</h4>
<p>
La logique business est concentrée dans l'application de connexion au service XML-RPC, je me
contente de récupérer les données et les afficher ainsi que gérer les demandes d'achat.
</p>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #531ab6; font-weight: bold;">import</span> xmlrpc.client

<span style="color: #531ab6; font-weight: bold;">from</span> django.contrib <span style="color: #531ab6; font-weight: bold;">import</span> messages
<span style="color: #531ab6; font-weight: bold;">from</span> django.http <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">HttpResponseRedirect</span>
<span style="color: #531ab6; font-weight: bold;">from</span> django.shortcuts <span style="color: #531ab6; font-weight: bold;">import</span> render
<span style="color: #531ab6; font-weight: bold;">from</span> django.conf <span style="color: #531ab6; font-weight: bold;">import</span> settings
<span style="color: #531ab6; font-weight: bold;">from</span> .forms <span style="color: #531ab6; font-weight: bold;">import</span> <span style="color: #005f5f; font-weight: bold;">OfferForm</span>
<span style="color: #531ab6; font-weight: bold;">import</span> xml_rpc

<span style="color: #531ab6; font-weight: bold;">class</span> <span style="color: #005f5f; font-weight: bold;">ApartView</span>:
    <span style="color: #005e8b;">uid</span> <span style="font-weight: bold;">=</span> <span style="color: #0000b0;">False</span>
    <span style="color: #005e8b;">context</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">{}</span>
    <span style="color: #005e8b;">password</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">''</span>

    <span style="color: #a0132f; font-weight: bold;">@</span><span style="color: #a0132f;">staticmethod</span>
    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">index</span><span style="color: #000000;">(</span><span style="color: #005e8b;">request</span><span style="color: #000000;">)</span>:
        <span style="color: #531ab6; font-weight: bold;">try</span>:
            <span style="color: #531ab6; font-weight: bold;">with</span> <span style="color: #8f0075; font-weight: bold;">open</span><span style="color: #000000;">(</span>settings.<span style="color: #0000b0; font-weight: bold;">BASE_DIR</span> <span style="font-weight: bold;">/</span> <span style="color: #354fcf;">'.env'</span><span style="color: #000000;">)</span> <span style="color: #531ab6; font-weight: bold;">as</span> f:
                <span style="color: #005e8b;">login</span>, <span style="color: #005e8b;">password</span> <span style="font-weight: bold;">=</span> f.readline<span style="color: #000000;">()</span>.split<span style="color: #000000;">(</span><span style="color: #354fcf;">','</span><span style="color: #000000;">)</span>
                <span style="color: #005f5f; font-weight: bold;">ApartView</span>.<span style="color: #005e8b;">password</span> <span style="font-weight: bold;">=</span> password
            <span style="color: #005f5f; font-weight: bold;">ApartView</span>.<span style="color: #005e8b;">uid</span> <span style="font-weight: bold;">=</span> xml_rpc.connect<span style="color: #000000;">(</span>login, password<span style="color: #000000;">)</span>
            <span style="color: #531ab6; font-weight: bold;">if</span> <span style="font-weight: bold;">not</span> <span style="color: #005f5f; font-weight: bold;">ApartView</span>.uid:
                <span style="color: #005f5f; font-weight: bold;">ApartView</span>.<span style="color: #005e8b;">context</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">{}</span>
                messages.error<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"No valid credentials, please connect with valid ones!"</span><span style="color: #000000;">)</span>

            <span style="color: #005f5f; font-weight: bold;">ApartView</span>.<span style="color: #005e8b;">context</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">{</span><span style="color: #354fcf;">'apartments'</span>: xml_rpc.get_apartments<span style="color: #dd22dd;">(</span><span style="color: #005f5f; font-weight: bold;">ApartView</span>.uid, password<span style="color: #dd22dd;">)</span><span style="color: #000000;">}</span>
        <span style="color: #531ab6; font-weight: bold;">except</span> <span style="color: #005f5f; font-weight: bold;">FileNotFoundError</span>:
            <span style="color: #005f5f; font-weight: bold;">ApartView</span>.<span style="color: #005e8b;">context</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">{}</span>
            messages.error<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"Please connect first!"</span><span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">except</span> <span style="color: #005f5f; font-weight: bold;">ConnectionError</span>:
            <span style="color: #005f5f; font-weight: bold;">ApartView</span>.<span style="color: #005e8b;">context</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">{}</span>
            messages.error<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"Please make sure the Odoo server is running!"</span><span style="color: #000000;">)</span>

        <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #721045;">render</span><span style="color: #000000;">(</span>request, <span style="color: #354fcf;">'odoo_realtor/index.html'</span>, <span style="color: #005f5f; font-weight: bold;">ApartView</span>.context<span style="color: #000000;">)</span>

    <span style="color: #a0132f; font-weight: bold;">@</span><span style="color: #a0132f;">staticmethod</span>
    <span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">create_offer</span><span style="color: #000000;">(</span><span style="color: #005e8b;">request</span><span style="color: #000000;">)</span>:
        <span style="color: #595959; font-style: italic;"># See https://docs.djangoproject.com/en/4.1/topics/forms/#the-view</span>
        <span style="color: #531ab6; font-weight: bold;">if</span> request.method <span style="font-weight: bold;">==</span> <span style="color: #354fcf;">"POST"</span>:
            <span style="color: #005e8b;">form</span> <span style="font-weight: bold;">=</span> <span style="color: #005f5f; font-weight: bold;">OfferForm</span><span style="color: #000000;">(</span>request.<span style="color: #0000b0; font-weight: bold;">POST</span><span style="color: #000000;">)</span>
            <span style="color: #531ab6; font-weight: bold;">if</span> form.is_valid<span style="color: #000000;">()</span>:
                <span style="color: #005e8b;">partner_name</span> <span style="font-weight: bold;">=</span> form.cleaned_data<span style="color: #000000;">[</span><span style="color: #354fcf;">'partner_name'</span><span style="color: #000000;">]</span>
                <span style="color: #005e8b;">offer_amt</span> <span style="font-weight: bold;">=</span> form.cleaned_data<span style="color: #000000;">[</span><span style="color: #354fcf;">'offer_amt'</span><span style="color: #000000;">]</span>
                <span style="color: #005e8b;">apart_id</span> <span style="font-weight: bold;">=</span> form.cleaned_data<span style="color: #000000;">[</span><span style="color: #354fcf;">'apart_id'</span><span style="color: #000000;">]</span>
                <span style="color: #531ab6; font-weight: bold;">try</span>:
                    xml_rpc.create_offer<span style="color: #000000;">(</span><span style="color: #005f5f; font-weight: bold;">ApartView</span>.uid, <span style="color: #005f5f; font-weight: bold;">ApartView</span>.password, partner_name, offer_amt, apart_id<span style="color: #000000;">)</span>
                <span style="color: #531ab6; font-weight: bold;">except</span> xmlrpc.client.<span style="color: #005f5f; font-weight: bold;">Fault</span>:
                    messages.error<span style="color: #000000;">(</span>request, <span style="color: #354fcf;">"You must input an offer larger than the existing one."</span><span style="color: #000000;">)</span>
                <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #005f5f; font-weight: bold;">HttpResponseRedirect</span><span style="color: #000000;">(</span><span style="color: #354fcf;">'/apartments'</span><span style="color: #000000;">)</span>
        <span style="color: #531ab6; font-weight: bold;">else</span>:
            <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #721045;">render</span><span style="color: #000000;">(</span>request, <span style="color: #354fcf;">'odoo_realtor/index.html'</span>, <span style="color: #005f5f; font-weight: bold;">ApartView</span>.context<span style="color: #000000;">)</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org6cc1c59">
<h2 id="org6cc1c59"><span class="section-number-2">3.</span> Connexion au service web</h2>
<div class="outline-text-2" id="text-3">
</div>
</section>
<section id="slide-org3cff54e">
<h3 id="org3cff54e"><span class="section-number-3">3.1.</span> Connexion via XML-RPC</h3>
<div class="outline-text-3" id="text-3-1">
</div>
</section>
<section id="slide-orge496c8d">
<h4 id="orge496c8d"><span class="section-number-4">3.1.1.</span> Fonctionnement</h4>
<ul>
<li>Nécessite que le <i>container</i> Odoo soit lancé et expose son port.</li>
<li>Nécessite de passer l'utilisateur et son mot de passe en paramètres.</li>
<li>Sépare chaque opération CRUD en une fonction.</li>
<li>Accède et trie correctement les données pour minimiser le travail d'affichage.</li>

</ul>
</section>
<section id="slide-org1e764e7">
<h4 id="org1e764e7"><span class="section-number-4">3.1.2.</span> Code</h4>
<div class="org-src-container">

<pre  class="src src-python"   ><code trim><span style="color: #531ab6; font-weight: bold;">import</span> xmlrpc.client
<span style="color: #531ab6; font-weight: bold;">import</span> itertools

<span style="color: #005e8b; font-weight: bold;">PORT</span> <span style="font-weight: bold;">=</span> <span style="color: #0000b0;">8069</span>
<span style="color: #005e8b; font-weight: bold;">URL</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">f"http://localhost:</span><span style="color: #00663f; font-weight: bold;">{</span><span style="color: #0000b0; background-color: #ffffff; font-weight: bold;">PORT</span><span style="color: #00663f; font-weight: bold;">}</span><span style="color: #354fcf;">"</span>
<span style="color: #005e8b; font-weight: bold;">DB</span> <span style="font-weight: bold;">=</span> <span style="color: #354fcf;">"dev01"</span>
<span style="color: #005e8b; font-weight: bold;">COMMON</span> <span style="font-weight: bold;">=</span> xmlrpc.client.<span style="color: #005f5f; font-weight: bold;">ServerProxy</span><span style="color: #000000;">(</span><span style="color: #354fcf;">f'</span><span style="color: #00663f; font-weight: bold;">{</span><span style="color: #0000b0; background-color: #ffffff; font-weight: bold;">URL</span><span style="color: #00663f; font-weight: bold;">}</span><span style="color: #354fcf;">/xmlrpc/2/common'</span><span style="color: #000000;">)</span>
<span style="color: #005e8b; font-weight: bold;">MODELS</span> <span style="font-weight: bold;">=</span> xmlrpc.client.<span style="color: #005f5f; font-weight: bold;">ServerProxy</span><span style="color: #000000;">(</span><span style="color: #354fcf;">f'</span><span style="color: #00663f; font-weight: bold;">{</span><span style="color: #0000b0; background-color: #ffffff; font-weight: bold;">URL</span><span style="color: #00663f; font-weight: bold;">}</span><span style="color: #354fcf;">/xmlrpc/2/object'</span><span style="color: #000000;">)</span>

<span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">connect</span><span style="color: #000000;">(</span><span style="color: #005e8b;">login</span>, <span style="color: #005e8b;">password</span><span style="color: #000000;">)</span>:
    <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #0000b0; font-weight: bold;">COMMON</span>.authenticate<span style="color: #000000;">(</span><span style="color: #0000b0; font-weight: bold;">DB</span>, login, password, <span style="color: #dd22dd;">{}</span><span style="color: #000000;">)</span>

<span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">db_interact</span><span style="color: #000000;">(</span><span style="color: #005e8b;">uid</span>, <span style="color: #005e8b;">password</span>, <span style="color: #005e8b;">table</span>, <span style="color: #005e8b;">mode</span>, <span style="color: #005e8b;">fields</span><span style="font-weight: bold;">=</span><span style="color: #0000b0;">None</span><span style="color: #000000;">)</span>:
    <span style="color: #531ab6; font-weight: bold;">return</span> <span style="color: #0000b0; font-weight: bold;">MODELS</span>.execute_kw<span style="color: #000000;">(</span>
        <span style="color: #0000b0; font-weight: bold;">DB</span>, uid, password, table, mode, <span style="color: #dd22dd;">[]</span>,
        <span style="color: #dd22dd;">{</span><span style="color: #354fcf;">'fields'</span>: fields<span style="color: #dd22dd;">}</span><span style="color: #000000;">)</span>

<span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">get_apartments</span><span style="color: #000000;">(</span><span style="color: #005e8b;">uid</span>, <span style="color: #005e8b;">password</span><span style="color: #000000;">)</span>:
    <span style="color: #005e8b;">products</span> <span style="font-weight: bold;">=</span> <span style="color: #721045;">db_interact</span><span style="color: #000000;">(</span>uid, password, <span style="color: #354fcf;">'product.product'</span>, <span style="color: #354fcf;">'search_read'</span>, <span style="color: #dd22dd;">[</span><span style="color: #354fcf;">'apart_id'</span>, <span style="color: #354fcf;">'qty_available'</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">apartments</span> <span style="font-weight: bold;">=</span> <span style="color: #721045;">db_interact</span><span style="color: #000000;">(</span>uid, password, <span style="color: #354fcf;">'realtor.apartment'</span>, <span style="color: #354fcf;">'search_read'</span>,
                             <span style="color: #dd22dd;">[</span><span style="color: #354fcf;">'name'</span>, <span style="color: #354fcf;">'img'</span>, <span style="color: #354fcf;">'availability_date'</span>, <span style="color: #354fcf;">'expected_price'</span>, <span style="color: #354fcf;">'apartment_area'</span>,
                              <span style="color: #354fcf;">'terrace_area'</span>, <span style="color: #354fcf;">'total_area'</span>, <span style="color: #354fcf;">'user_id'</span>, <span style="color: #354fcf;">'best_price'</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>
    <span style="color: #005e8b;">offers</span> <span style="font-weight: bold;">=</span> <span style="color: #721045;">db_interact</span><span style="color: #000000;">(</span>uid, password, <span style="color: #354fcf;">'realtor.offer'</span>, <span style="color: #354fcf;">'search_read'</span>, <span style="color: #dd22dd;">[</span><span style="color: #354fcf;">'price'</span>, <span style="color: #354fcf;">'partner_id'</span>, <span style="color: #354fcf;">'property_id'</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>

    <span style="color: #595959; font-style: italic;"># Align apartments and products and the same ids since 'apart_id' and 'property_id' refers to 'id'</span>
    <span style="color: #595959; font-style: italic;"># they have the same number of elements</span>
    <span style="color: #005e8b;">apartments</span> <span style="font-weight: bold;">=</span> <span style="color: #8f0075; font-weight: bold;">sorted</span><span style="color: #000000;">(</span>apartments, key<span style="font-weight: bold;">=</span><span style="color: #531ab6; font-weight: bold;">lambda</span> <span style="color: #005e8b;">x</span>: x<span style="color: #dd22dd;">[</span><span style="color: #354fcf;">'id'</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span> <span style="color: #595959; font-style: italic;"># id is an int</span>
    <span style="color: #005e8b;">products</span> <span style="font-weight: bold;">=</span> <span style="color: #8f0075; font-weight: bold;">sorted</span><span style="color: #000000;">(</span>products, key<span style="font-weight: bold;">=</span><span style="color: #531ab6; font-weight: bold;">lambda</span> <span style="color: #005e8b;">x</span>: x<span style="color: #dd22dd;">[</span><span style="color: #354fcf;">'apart_id'</span><span style="color: #dd22dd;">][</span><span style="color: #0000b0;">0</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>  <span style="color: #595959; font-style: italic;"># apart_id is a list like [1, 'Apartment']</span>
    <span style="color: #595959; font-style: italic;"># Offers keeps track of all the offers, but we want only the latest offer, which is the greatest in value</span>
    <span style="color: #005e8b;">offers</span> <span style="font-weight: bold;">=</span> <span style="color: #8f0075; font-weight: bold;">sorted</span><span style="color: #000000;">(</span>offers, key<span style="font-weight: bold;">=</span><span style="color: #531ab6; font-weight: bold;">lambda</span> <span style="color: #005e8b;">x</span>: x<span style="color: #dd22dd;">[</span><span style="color: #354fcf;">'property_id'</span><span style="color: #dd22dd;">][</span><span style="color: #0000b0;">0</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>   <span style="color: #595959; font-style: italic;"># property_id is a list like [1, 'Apartment']</span>
    <span style="color: #595959; font-style: italic;"># Since the offers are sorted, group by property id and get the first element (the greatest) of each group</span>
    <span style="color: #005e8b;">offers</span> <span style="font-weight: bold;">=</span> <span style="color: #000000;">[</span><span style="color: #8f0075; font-weight: bold;">next</span><span style="color: #dd22dd;">(</span>g<span style="color: #dd22dd;">)</span> <span style="color: #531ab6; font-weight: bold;">for</span> <span style="color: #005e8b;">_</span>, <span style="color: #005e8b;">g</span> <span style="font-weight: bold;">in</span> itertools.groupby<span style="color: #dd22dd;">(</span>offers, <span style="color: #531ab6; font-weight: bold;">lambda</span> <span style="color: #005e8b;">x</span>: x<span style="color: #008899;">[</span><span style="color: #354fcf;">'property_id'</span><span style="color: #008899;">][</span><span style="color: #0000b0;">0</span><span style="color: #008899;">]</span><span style="color: #dd22dd;">)</span><span style="color: #000000;">]</span>
    <span style="color: #531ab6; font-weight: bold;">for</span> <span style="color: #005e8b;">apart</span>, <span style="color: #005e8b;">prod</span>, <span style="color: #005e8b;">offer</span> <span style="font-weight: bold;">in</span> <span style="color: #8f0075; font-weight: bold;">zip</span><span style="color: #000000;">(</span>apartments, products, offers<span style="color: #000000;">)</span>:
        apart<span style="color: #000000;">[</span><span style="color: #005e8b;">'quantity'</span><span style="color: #000000;">]</span> <span style="font-weight: bold;">=</span> prod<span style="color: #000000;">[</span><span style="color: #354fcf;">'qty_available'</span><span style="color: #000000;">]</span>
        apart<span style="color: #000000;">[</span><span style="color: #005e8b;">'user_id'</span><span style="color: #000000;">]</span> <span style="font-weight: bold;">=</span> apart<span style="color: #000000;">[</span><span style="color: #354fcf;">'user_id'</span><span style="color: #000000;">][</span><span style="color: #0000b0;">1</span><span style="color: #000000;">]</span>  <span style="color: #595959; font-style: italic;"># Keep the seller's name but not the ID, format is [1, "name"] otherwise</span>
        <span style="color: #595959; font-style: italic;"># offer['partner_id'] is like [1, 'name'] so grab the first element</span>
        <span style="color: #595959; font-style: italic;"># the output of execute is a list of dict, same logic and grab the only element</span>
        apart<span style="color: #000000;">[</span><span style="color: #005e8b;">'partner_id'</span><span style="color: #000000;">]</span> <span style="font-weight: bold;">=</span> \
            <span style="color: #0000b0; font-weight: bold;">MODELS</span>.execute_kw<span style="color: #000000;">(</span><span style="color: #0000b0; font-weight: bold;">DB</span>, uid, password, <span style="color: #354fcf;">'res.partner'</span>, <span style="color: #354fcf;">'search_read'</span>, <span style="color: #dd22dd;">[</span><span style="color: #008899;">[</span><span style="color: #972500;">[</span><span style="color: #354fcf;">'id'</span>, <span style="color: #354fcf;">'='</span>, offer<span style="color: #808000;">[</span><span style="color: #354fcf;">'partner_id'</span><span style="color: #808000;">][</span><span style="color: #0000b0;">0</span><span style="color: #808000;">]</span><span style="color: #972500;">]</span><span style="color: #008899;">]</span><span style="color: #dd22dd;">]</span>,
                              <span style="color: #dd22dd;">{</span><span style="color: #354fcf;">'fields'</span>: <span style="color: #008899;">[</span><span style="color: #354fcf;">'id'</span>, <span style="color: #354fcf;">'name'</span><span style="color: #008899;">]</span><span style="color: #dd22dd;">}</span><span style="color: #000000;">)[</span><span style="color: #0000b0;">0</span><span style="color: #000000;">][</span><span style="color: #354fcf;">'name'</span><span style="color: #000000;">]</span>

    <span style="color: #531ab6; font-weight: bold;">return</span> apartments

<span style="color: #531ab6; font-weight: bold;">def</span> <span style="color: #721045;">create_offer</span><span style="color: #000000;">(</span><span style="color: #005e8b;">uid</span>, <span style="color: #005e8b;">password</span>, <span style="color: #005e8b;">partner_name</span>, <span style="color: #005e8b;">offer_amt</span>, <span style="color: #005e8b;">apart_id</span><span style="color: #000000;">)</span>:
    <span style="color: #005e8b;">partner</span> <span style="font-weight: bold;">=</span> <span style="color: #0000b0; font-weight: bold;">MODELS</span>.execute_kw<span style="color: #000000;">(</span><span style="color: #0000b0; font-weight: bold;">DB</span>, uid, password, <span style="color: #354fcf;">'res.partner'</span>, <span style="color: #354fcf;">'search_read'</span>, <span style="color: #dd22dd;">[</span>
        <span style="color: #008899;">[</span><span style="color: #972500;">[</span><span style="color: #354fcf;">'name'</span>, <span style="color: #354fcf;">'='</span>, partner_name<span style="color: #972500;">]</span><span style="color: #008899;">]</span><span style="color: #dd22dd;">]</span>, <span style="color: #dd22dd;">{</span><span style="color: #354fcf;">'fields'</span>: <span style="color: #008899;">[</span><span style="color: #354fcf;">'id'</span>, <span style="color: #354fcf;">'name'</span><span style="color: #008899;">]</span><span style="color: #dd22dd;">}</span><span style="color: #000000;">)</span>
    <span style="color: #531ab6; font-weight: bold;">if</span> <span style="font-weight: bold;">not</span> partner:
        <span style="color: #005e8b;">partner_id</span> <span style="font-weight: bold;">=</span> <span style="color: #0000b0; font-weight: bold;">MODELS</span>.execute_kw<span style="color: #000000;">(</span><span style="color: #0000b0; font-weight: bold;">DB</span>, uid, password, <span style="color: #354fcf;">'res.partner'</span>, <span style="color: #354fcf;">'create'</span>, <span style="color: #dd22dd;">[</span><span style="color: #008899;">{</span><span style="color: #354fcf;">'name'</span>: partner_name<span style="color: #008899;">}</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>
    <span style="color: #531ab6; font-weight: bold;">else</span>:
        <span style="color: #005e8b;">partner_id</span> <span style="font-weight: bold;">=</span> partner<span style="color: #000000;">[</span><span style="color: #0000b0;">0</span><span style="color: #000000;">][</span><span style="color: #354fcf;">'id'</span><span style="color: #000000;">]</span>  <span style="color: #595959; font-style: italic;"># Same issue with the result of a search_read query</span>

    <span style="color: #0000b0; font-weight: bold;">MODELS</span>.execute_kw<span style="color: #000000;">(</span><span style="color: #0000b0; font-weight: bold;">DB</span>, uid, password, <span style="color: #354fcf;">'realtor.offer'</span>, <span style="color: #354fcf;">'create'</span>, <span style="color: #dd22dd;">[</span><span style="color: #008899;">{</span><span style="color: #354fcf;">'price'</span>: offer_amt,
                                                                      <span style="color: #354fcf;">'partner_id'</span>: partner_id,
                                                                      <span style="color: #354fcf;">'property_id'</span>: apart_id<span style="color: #008899;">}</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgf4fa970">
<h2 id="orgf4fa970"><span class="section-number-2">4.</span> Conclusion</h2>
<div class="outline-text-2" id="text-4">
</div>
</section>
<section id="slide-org170a371">
<h3 id="org170a371"><span class="section-number-3">4.1.</span> Odoo</h3>
<ul>
<li>Gestion des modèles et de a logique business.</li>
<li>Gestion des vues XML.</li>
<li>Création de données factices.</li>

</ul>
</section>
<section id="slide-orgde7b3cb">
<h3 id="orgde7b3cb"><span class="section-number-3">4.2.</span> Django</h3>
<ul>
<li>Interaction avec Odoo via XML-RPC.</li>
<li>Création de vues web.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org39c84f5" data-background="#bde0fe">
<h2 id="org39c84f5"><span class="section-number-2">5.</span> Questions ?</h2>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
slideNumber:true, width:1920, height:1024,

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]

});

</script>
</body>
</html>
